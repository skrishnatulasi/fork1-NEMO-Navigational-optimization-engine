<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tamil Nadu Fishermen App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="static/styles.css" />
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <span class="navbar-brand"><i class="fa-solid fa-fish"></i> Tamil Nadu Fishermen / родрооро┐ро┤рпНроиро╛роЯрпБ роорпАройро╡ро░рпНроХро│рпН</span>
      <button id="langBtn" class="btn btn-light btn-sm ms-auto">ЁЯМР родрооро┐ро┤рпН / English</button>
    </div>
  </nav>
  <div class="container-fluid mt-3">
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="list-group" id="sidebar">
          <button class="list-group-item list-group-item-action active" data-section="map"><i class="fa-solid fa-map"></i> Map & PFZ / ро╡ро░рпИрокроЯроорпН & роорпАройрпНрокро┐роЯро┐ роЗроЯроЩрпНроХро│рпН</button>
          <button class="list-group-item list-group-item-action" data-section="catch"><i class="fa-solid fa-clipboard-list"></i> Catch Log / рокро┐роЯро┐рокрпНрокрпБ рокродро┐ро╡рпБ</button>
          <button class="list-group-item list-group-item-action" data-section="income"><i class="fa-solid fa-chart-line"></i> Income / ро╡ро░рпБрооро╛ройроорпН</button>
          <button class="list-group-item list-group-item-action" data-section="harbor"><i class="fa-solid fa-anchor"></i> Harbor / родрпБро▒рпИроорпБроХроорпН</button>
          <button class="list-group-item list-group-item-action" data-section="subsidy"><i class="fa-solid fa-money-check-dollar"></i> Subsidy / роЙродро╡ро┐родрпНродрпКроХрпИ</button>
          <button class="list-group-item list-group-item-action" data-section="safety"><i class="fa-solid fa-life-ring"></i> Safety / рокро╛родрпБроХро╛рокрпНрокрпБ</button>
        </div>
      </div>
      <div class="col-md-9">
        <div id="section-map" class="section">
          <div class="card mb-3">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span><i class="fa-solid fa-map"></i> Map & Potential Fishing Zones / ро╡ро░рпИрокроЯроорпН & роЪро╛родрпНродро┐ропрооро╛рой роорпАройрпНрокро┐роЯро┐ роЗроЯроЩрпНроХро│рпН</span>
              <div>
                <button class="btn btn-primary btn-sm" id="predictBtn"><i class="fa-solid fa-water"></i> Predict Zones / роЗроЯроЩрпНроХро│рпИ роХрогро┐роХрпНроХ</button>
                <button class="btn btn-success btn-sm" id="routeBtn"><i class="fa-solid fa-route"></i> Optimize Route / ро╡ро┤ро┐ропрпИ роорпЗроорпНрокроЯрпБродрпНродрпБ</button>
                <button class="btn btn-warning btn-sm" id="tamilAudioBtn"><i class="fa-solid fa-volume-up"></i> родрооро┐ро┤рпН роЖроЯро┐ропрпЛ</button>
              </div>
            </div>
            <div class="card-body p-0">
              <div id="map" style="height:400px;"></div>
            </div>
            <div class="card-footer">
              <span class="badge bg-danger">тЧП</span> High catch / роЕродро┐роХ рокро┐роЯро┐рокрпНрокрпБ
              <span class="badge bg-warning text-dark">тЧП</span> Medium catch / роироЯрпБродрпНродро░ рокро┐роЯро┐рокрпНрокрпБ
              <span class="badge bg-primary">тЧП</span> Low catch / роХрпБро▒рпИроирпНрод рокро┐роЯро┐рокрпНрокрпБ
            </div>
          </div>
          <div id="route-summary"></div>
          <!-- NEW: Tamil Audio Controls Section -->
          <div id="audio-controls" class="card mt-3" style="display:none;">
            <div class="card-header">
              <i class="fa-solid fa-volume-up"></i> Tamil Audio Controls / родрооро┐ро┤рпН роЖроЯро┐ропрпЛ роХроЯрпНроЯрпБрокрпНрокро╛роЯрпБроХро│рпН
            </div>
            <div class="card-body">
              <button class="btn btn-info btn-sm me-2" onclick="playWelcomeMessage()">
                <i class="fa-solid fa-play"></i> Welcome / ро╡ро░ро╡рпЗро▒рпНрокрпБ
              </button>
              <button class="btn btn-success btn-sm me-2" onclick="playRouteInstructions()" id="routeAudioBtn" disabled>
                <i class="fa-solid fa-route"></i> Route Instructions / ро╡ро┤ро┐ ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпН
              </button>
              <button class="btn btn-warning btn-sm me-2" onclick="playZoneInfo()" id="zoneAudioBtn" disabled>
                <i class="fa-solid fa-info-circle"></i> Zone Info / роЗроЯ родроХро╡ро▓рпН
              </button>
              <button class="btn btn-danger btn-sm" onclick="playSafetyAlert()">
                <i class="fa-solid fa-exclamation-triangle"></i> Safety Alert / рокро╛родрпБроХро╛рокрпНрокрпБ роОроЪрпНроЪро░ро┐роХрпНроХрпИ
              </button>
            </div>
          </div>
        </div>
        <div id="section-catch" class="section" style="display:none;">
          <div class="card">
            <div class="card-header"><i class="fa-solid fa-clipboard-list"></i> Catch Log / рокро┐роЯро┐рокрпНрокрпБ рокродро┐ро╡рпБ</div>
            <div class="card-body">
              <form id="catchForm" class="row g-2">
                <div class="col-md-3"><input type="text" class="form-control" id="fishType" placeholder="Fish Type / роорпАройрпН ро╡роХрпИ" required /></div>
                <div class="col-md-2"><input type="number" class="form-control" id="weight" placeholder="Weight (kg) / роОроЯрпИ (роХро┐.роХро┐)" required /></div>
                <div class="col-md-2"><input type="number" class="form-control" id="price" placeholder="Price (тВ╣) / ро╡ро┐ро▓рпИ (тВ╣)" required /></div>
                <div class="col-md-3"><input type="text" class="form-control" id="buyer" placeholder="Buyer / ро╡ро╛роЩрпНроХрпБрокро╡ро░рпН" /></div>
                <div class="col-md-2"><button type="submit" class="btn btn-success w-100">Log Catch / рокродро┐ро╡рпБ роЪрпЖропрпН</button></div>
              </form>
              <div id="catch-log-list" class="mt-3"></div>
            </div>
          </div>
        </div>
        <div id="section-income" class="section" style="display:none;">
          <div class="card">
            <div class="card-header"><i class="fa-solid fa-chart-line"></i> Income & Sales / ро╡ро░рпБрооро╛ройроорпН & ро╡ро┐ро▒рпНрокройрпИ</div>
            <div class="card-body" id="income-content"></div>
          </div>
        </div>
        <div id="section-harbor" class="section" style="display:none;">
          <div class="card">
            <div class="card-header"><i class="fa-solid fa-anchor"></i> Harbor & Landing Center / родрпБро▒рпИроорпБроХроорпН & роЗро▒роЩрпНроХрпБроорпН роорпИропроорпН</div>
            <div class="card-body" id="harbor-content"></div>
          </div>
        </div>
        <div id="section-subsidy" class="section" style="display:none;">
          <div class="card">
            <div class="card-header"><i class="fa-solid fa-money-check-dollar"></i> Subsidy & Scheme Checker / роЙродро╡ро┐родрпНродрпКроХрпИ & родро┐роЯрпНроЯроорпН роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ</div>
            <div class="card-body" id="subsidy-content"></div>
          </div>
        </div>
        <div id="section-safety" class="section" style="display:none;">
          <div class="card">
            <div class="card-header"><i class="fa-solid fa-life-ring"></i> Safety & SOS / рокро╛родрпБроХро╛рокрпНрокрпБ & роЕро╡роЪро░ роЙродро╡ро┐</div>
            <div class="card-body" id="safety-content"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="toast" class="toast align-items-center text-bg-success border-0 position-fixed bottom-0 end-0 m-3" role="alert" aria-live="assertive" aria-atomic="true" style="display:none;">
    <div class="d-flex">
      <div class="toast-body" id="toast-body"></div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" onclick="hideToast()"></button>
    </div>
  </div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="static/app.js"></script>
  <!-- NEW: Tamil Audio Enhancement Script -->
  <script>
    // Tamil audio functionality - added without modifying existing code
    const tamilAudio = {
      welcome: 'ро╡рогроХрпНроХроорпН! роирпАроорпЛ роорпАройрпНрокро┐роЯро┐ ро╡ро┤ро┐роХро╛роЯрпНроЯро┐ роЙроЩрпНроХро│рпИ ро╡ро░ро╡рпЗро▒рпНроХро┐ро▒родрпБ',
      zoneFound: 'роЪро┐ро▒роирпНрод роорпАройрпНрокро┐роЯро┐ роЗроЯроорпН роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ',
      safetyFirst: 'роХроЯро▓ро┐ро▓рпН роОрокрпНрокрпЛродрпБроорпН рокро╛родрпБроХро╛рокрпНрокрпБ роЙрокроХро░рогроЩрпНроХро│рпИ роЕрогро┐ропрпБроЩрпНроХро│рпН',
      goodLuck: 'роиро▓рпНро▓ роорпАройрпНрокро┐роЯро┐ ро╡ро╛ро┤рпНродрпНродрпБроХрпНроХро│рпН',
      routeFound: 'ро╡ро┤ро┐ роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ',
      catchLogged: 'роорпАройрпНрокро┐роЯро┐ рокродро┐ро╡рпБ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ'
    };

    // Tamil speech function
    function speakTamil(text) {
      try {
        if ('speechSynthesis' in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = 'ta-IN';
          utterance.rate = 0.8;
          speechSynthesis.speak(utterance);
        }
      } catch (error) {
        console.error('Tamil speech error:', error);
      }
    }

    // Audio control functions
    function playWelcomeMessage() {
      speakTamil(tamilAudio.welcome);
    }

    function playRouteInstructions() {
      // Check if route exists (you may need to adjust this based on your existing variables)
      speakTamil('ро╡ро┤ро┐ ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпН родропро╛ро░рпН. роЪро┐ро▒роирпНрод роорпАройрпНрокро┐роЯро┐ роЗроЯродрпНродро┐ро▒рпНроХрпБ роЪрпЖро▓рпНро▓рпБроЩрпНроХро│рпН.');
    }

    function playZoneInfo() {
      speakTamil('роорпАройрпНрокро┐роЯро┐ роЗроЯроЩрпНроХро│рпН роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│рой. ' + tamilAudio.goodLuck);
    }

    function playSafetyAlert() {
      speakTamil(tamilAudio.safetyFirst + '. роХроЯро▓ро┐ро▓рпН роЪрпЖро▓рпНро▓рпБроорпН роорпБройрпН ро╡ро╛ройро┐ро▓рпИ роЕро▒ро┐роХрпНроХрпИропрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН.');
    }

    // Enhanced event listeners (non-intrusive)
    document.addEventListener('DOMContentLoaded', function() {
      // Tamil Audio Button
      const tamilAudioBtn = document.getElementById('tamilAudioBtn');
      if (tamilAudioBtn) {
        tamilAudioBtn.addEventListener('click', function() {
          const audioControls = document.getElementById('audio-controls');
          audioControls.style.display = audioControls.style.display === 'none' ? 'block' : 'none';
        });
      }

      // Enhance Predict Button (non-intrusive)
      const predictBtn = document.getElementById('predictBtn');
      if (predictBtn) {
        predictBtn.addEventListener('click', function() {
          setTimeout(() => {
            document.getElementById('zoneAudioBtn').disabled = false;
            speakTamil(tamilAudio.zoneFound);
          }, 2000);
        });
      }

      // Enhance Route Button (non-intrusive)
      const routeBtn = document.getElementById('routeBtn');
      if (routeBtn) {
        routeBtn.addEventListener('click', function() {
          setTimeout(() => {
            document.getElementById('routeAudioBtn').disabled = false;
            speakTamil(tamilAudio.routeFound);
          }, 2000);
        });
      }

      // Enhance Catch Form (non-intrusive)
      const catchForm = document.getElementById('catchForm');
      if (catchForm) {
        catchForm.addEventListener('submit', function(e) {
          setTimeout(() => {
            speakTamil(tamilAudio.catchLogged);
          }, 500);
        });
      }

      // Enhance Language Button (non-intrusive)
      const langBtn = document.getElementById('langBtn');
      if (langBtn) {
        langBtn.addEventListener('click', function() {
          setTimeout(() => {
            speakTamil('роорпКро┤ро┐ рооро╛ро▒рпНро▒рокрпНрокроЯрпНроЯродрпБ');
          }, 300);
        });
      }
    });
  </script>
</body>
</html>

